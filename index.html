<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Premium Nick Painter</title>
<style>
body{margin:0;padding:0;font-family:'Segoe UI',sans-serif;background:#0d0d0d;color:white;}
.container{max-width:1000px;margin:50px auto;padding:30px;border-radius:20px;background: linear-gradient(145deg,#1a1a1a,#2b2b2b);box-shadow:0 10px 40px rgba(0,0,0,0.8);}
h1{text-align:center;font-size:2.5rem;color:#ff77ff;margin-bottom:25px;}
input[type=text]{width:100%;padding:14px;border-radius:12px;border:none;background:#222;color:white;font-size:16px;margin-bottom:20px;}
#preview{margin:20px 0;padding:15px;border-radius:15px;text-align:center;font-size:28px;min-height:70px;display:flex;justify-content:center;align-items:center;background: #111;box-shadow: 0 0 20px rgba(255,255,255,0.05);transition: all 0.3s ease;}
#paints-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:14px;margin-top:15px;}
.paint-btn{padding:12px;border-radius:12px;font-weight:bold;cursor:pointer;color:white;text-align:center;transition:0.3s;user-select:none;position:relative;height:50px;display:flex;justify-content:center;align-items:center;font-size:0.9rem;box-shadow:0 3px 6px rgba(0,0,0,0.4);}
.paint-btn.selected{border:3px solid white;transform:translateY(-3px);}
.paint-btn:hover{opacity:0.9;}
button{margin-top:15px;padding:14px 28px;border-radius:12px;border:none;font-weight:bold;cursor:pointer;transition:0.3s;}
#apply-btn{background:linear-gradient(135deg,#9147ff,#7722cc);color:white;}
#reset-btn{background:#555;color:white;margin-left:10px;}
button:hover{opacity:0.85;}
#user-list{margin-top:25px;}
.user-item{display:flex;justify-content:space-between;align-items:center;margin:6px 0;padding:6px 12px;background:#222;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,0.3);}
.user-item button{background:#ff4444;color:white;border:none;padding:5px 10px;border-radius:6px;cursor:pointer;}
.user-item button:hover{opacity:0.85;}

/* ===== Animacje ===== */
@keyframes rainbowShift {0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
@keyframes glowPulse {0%,100%{text-shadow:0 0 6px #ff00ff,0 0 12px #ff77ff}50%{text-shadow:0 0 10px #ff77ff,0 0 20px #ff00ff}}
@keyframes moveLeftRight1 {0%{background-position:0%}100%{background-position:200%}}
@keyframes moveLeftRight2 {0%{background-position:200%}100%{background-position:0%}}
@keyframes moveLeftRight3 {0%{background-position:-100%}100%{background-position:100%}}
</style>
</head>
<body>

<div class="container">
<h1>Premium Nick Painter</h1>
<label>Nick użytkownika:</label>
<input type="text" id="nick-input" placeholder="Wpisz nick...">
<div id="preview">Podgląd nicku</div>

<h3>Wybierz paint:</h3>
<div id="paints-container"></div>

<button id="apply-btn">Nadaj paint</button>
<button id="reset-btn">Resetuj nick</button>

<h3>Użytkownicy:</h3>
<div id="user-list"></div>

<script>
const FIREBASE_URL = "https://test-be375-default-rtdb.europe-west1.firebasedatabase.app/premium.json";

const GRADIENTS = {
  "Tęczowy":"linear-gradient(90deg, red, orange, yellow, green, cyan, blue, violet)",
  "Lava":"linear-gradient(90deg,#ff0000,#ff7700,#aa0000)",
  "Neon":"linear-gradient(90deg,#ff00ff,#00ffff)",
  "Sunset":"linear-gradient(90deg,#ff4500,#ffb347)",
  "Ocean":"linear-gradient(90deg,#1e90ff,#00ced1)",
  "Fire":"linear-gradient(90deg,#ff0000,#ffae00)",
  "Ice":"linear-gradient(90deg,#00ffff,#00bfff)"
};

// ===== Painty =====
const paints = [
  {name:"Czerwony",type:"color",color:"#ff0000"},
  {name:"Zielony",type:"color",color:"#00ff00"},
  {name:"Lava Glow",type:"color",color:"#ff0000",glow:true,glowColor:"#ff7700"},
  {name:"Tęczowy",type:"gradient",gradient:"Tęczowy"},
  {name:"Neon Glow",type:"gradient",gradient:"Neon",glow:true,glowColor:"#ff00ff"},
  {name:"Sunset",type:"gradient",gradient:"Sunset"},
  {name:"Ocean",type:"gradient",gradient:"Ocean"},
  {name:"Split Red/White",type:"split",color:"#ff0000",splitColor:"#ffffff"},
  {name:"Split Blue/Yellow",type:"split",color:"#00ccff",splitColor:"#ffff00"},
  {name:"Anim 1",type:"animatedGradient",gradient:"Tęczowy",animation:"moveLeftRight1"},
  {name:"Anim 2",type:"animatedGradient",gradient:"Sunset",animation:"moveLeftRight2"},
  {name:"Anim 3",type:"animatedGradient",gradient:"Neon",animation:"moveLeftRight3"}
];

const paintsContainer = document.getElementById("paints-container");
const preview = document.getElementById("preview");
const nickInput = document.getElementById("nick-input");
let selectedPaint = paints[0];

function updatePreview(){
  const nick = nickInput.value || "Podgląd";
  preview.innerHTML = nick;
  preview.style.animation="";
  preview.style.textShadow="";
  preview.style.color="";
  preview.style.background="";
  preview.style.webkitTextFillColor="";

  if(selectedPaint.type==="color"){
    preview.style.color = selectedPaint.color;
    if(selectedPaint.glow) preview.style.textShadow = `0 0 6px ${selectedPaint.glowColor},0 0 12px ${selectedPaint.glowColor}`;
  } else if(selectedPaint.type==="gradient"){
    preview.style.backgroundImage = GRADIENTS[selectedPaint.gradient];
    preview.style.webkitBackgroundClip="text";
    preview.style.webkitTextFillColor="transparent";
    if(selectedPaint.glow) preview.style.textShadow = `0 0 6px ${selectedPaint.glowColor},0 0 12px ${selectedPaint.glowColor}`;
  } else if(selectedPaint.type==="split"){
    const mid = Math.floor(nick.length/2);
    preview.innerHTML = `<span style="color:${selectedPaint.color}">${nick.slice(0,mid)}</span><span style="color:${selectedPaint.splitColor}">${nick.slice(mid)}</span>`;
  } else if(selectedPaint.type==="animatedGradient"){
    preview.style.backgroundImage = GRADIENTS[selectedPaint.gradient];
    preview.style.webkitBackgroundClip="text";
    preview.style.webkitTextFillColor="transparent";
    preview.style.animation = selectedPaint.animation + " 4s linear infinite";
  }
}

paints.forEach(p=>{
  const btn = document.createElement("div");
  btn.className="paint-btn";
  btn.textContent=p.name;
  if(p.type==="color") btn.style.background=p.color;
  else if(p.type==="gradient" || p.type==="animatedGradient") btn.style.background = GRADIENTS[p.gradient] || "#555";
  btn.onclick = ()=>{
    document.querySelectorAll(".paint-btn").forEach(b=>b.classList.remove("selected"));
    btn.classList.add("selected");
    selectedPaint = p;
    updatePreview();
  };
  paintsContainer.appendChild(btn);
});

nickInput.addEventListener("input",updatePreview);
updatePreview();

// ===== User list =====
const userListEl = document.getElementById("user-list");
async function renderUsers(){
  try{
    const res = await fetch(FIREBASE_URL);
    const data = await res.json();
    userListEl.innerHTML="";
    if(!data) return;
    Object.keys(data).forEach(nick=>{
      const div = document.createElement("div");
      div.className="user-item";
      const span = document.createElement("span");
      span.textContent = nick;
      div.appendChild(span);
      const btn = document.createElement("button");
      btn.textContent="Usuń";
      btn.onclick = async()=>{
        await fetch(`${FIREBASE_URL}/${nick}.json`,{method:"DELETE"});
        renderUsers();
      };
      div.appendChild(btn);
      userListEl.appendChild(div);
    });
  }catch(e){console.error(e);}
}

// ===== Apply & Reset =====
document.getElementById("apply-btn").onclick = async()=>{
  const nick = nickInput.value.trim();
  if(!nick) return alert("Wpisz nick");
  let paintData={type:selectedPaint.type};
  if(selectedPaint.color) paintData.color=selectedPaint.color;
  if(selectedPaint.splitColor) paintData.splitColor=selectedPaint.splitColor;
  if(selectedPaint.gradient) paintData.gradient=selectedPaint.gradient;
  if(selectedPaint.glow) paintData.glow=true;
  if(selectedPaint.glowColor) paintData.glowColor=selectedPaint.glowColor;
  if(selectedPaint.animation) paintData.animation=selectedPaint.animation;

  const payload = {}; payload[nick]={paint:paintData,badges:[]};
  await fetch(FIREBASE_URL,{method:"PATCH",body:JSON.stringify(payload)});
  renderUsers();
};

document.getElementById("reset-btn").onclick = async()=>{
  const nick = nickInput.value.trim();
  if(!nick) return alert("Wpisz nick");
  const payload = {}; payload[nick]={paint:{type:"color",color:"#00ff00"},badges:[]};
  await fetch(FIREBASE_URL,{method:"PATCH",body:JSON.stringify(payload)});
  updatePreview();
  renderUsers();
};

renderUsers();
</script>
</body>
</html>
