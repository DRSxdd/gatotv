<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Premium Nick Painter</title>
<style>
body{font-family:'Segoe UI',sans-serif;background:#111;color:white;margin:0;padding:0;}
.container{max-width:1000px;margin:50px auto;padding:30px;border-radius:20px;background:linear-gradient(145deg,#1c1c1c,#2a2a2a);box-shadow:0 10px 40px rgba(0,0,0,0.7);}
h1{text-align:center;color:#ff77ff;margin-bottom:20px;}
input[type=text]{width:100%;padding:12px;border-radius:10px;border:none;background:#222;color:white;font-size:16px;}
#preview{margin:20px 0;padding:15px;border-radius:15px;text-align:center;font-size:26px;background:#111;min-height:60px;display:flex;justify-content:center;align-items:center;box-shadow:0 0 10px rgba(255,255,255,0.1);}
#paints-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px;margin-top:15px;}
.paint-btn{padding:10px;border-radius:10px;font-weight:bold;cursor:pointer;color:white;text-align:center;transition:0.2s;user-select:none;}
.paint-btn.selected{border:2px solid white;transform:translateY(-2px);}
.paint-btn:hover{opacity:0.85;}
button{margin-top:15px;padding:12px 25px;border-radius:10px;border:none;font-weight:bold;cursor:pointer;transition:0.2s;}
#apply-btn{background:linear-gradient(135deg,#9147ff,#7722cc);color:white;}
#reset-btn{background:#555;color:white;margin-left:10px;}
#user-list{margin-top:25px;}
.user-item{display:flex;justify-content:space-between;align-items:center;margin:6px 0;padding:6px 12px;background:#222;border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,0.3);}
.user-item button{background:#ff4444;color:white;border:none;padding:5px 10px;border-radius:5px;cursor:pointer;}
.user-item button:hover{opacity:0.85;}
</style>
</head>
<body>
<div class="container">
<h1>Premium Nick Painter</h1>
<label>Nick użytkownika:</label>
<input type="text" id="nick-input" placeholder="Wpisz nick...">
<div id="preview">Podgląd nicku</div>

<h3>Wybierz paint:</h3>
<div id="paints-container"></div>

<button id="apply-btn">Nadaj paint</button>
<button id="reset-btn">Resetuj nick</button>

<h3>Użytkownicy:</h3>
<div id="user-list"></div>
</div>

<script>
const FIREBASE_URL = "https://test-be375-default-rtdb.europe-west1.firebasedatabase.app/premium.json";

const GRADIENTS = {
  "Tęczowy":"linear-gradient(90deg, red, orange, yellow, green, cyan, blue, violet)",
  "Lava":"linear-gradient(90deg,#ff0000,#ff7700,#aa0000)",
  "Neon":"linear-gradient(90deg,#ff00ff,#00ffff)",
  "Sunset":"linear-gradient(90deg,#ff4500,#ffb347)",
  "Ocean":"linear-gradient(90deg,#1e90ff,#00ced1)",
  "Fire":"linear-gradient(90deg,#ff0000,#ffae00)",
  "Ice":"linear-gradient(90deg,#00ffff,#00bfff)"
};

// ======= Painty =======
const paints = [
  {name:"Czerwony",type:"color",color:"#ff0000"},
  {name:"Zielony",type:"color",color:"#00ff00"},
  {name:"Lava",type:"color",color:"#ff0000",glow:true,glowColor:"#ff7700"},
  {name:"Tęczowy",type:"gradient",gradient:"Tęczowy"},
  {name:"Neon",type:"gradient",gradient:"Neon"},
  {name:"Sunset",type:"gradient",gradient:"Sunset"},
  {name:"Ocean",type:"gradient",gradient:"Ocean"},
  {name:"Fire",type:"gradient",gradient:"Fire",glow:true,glowColor:"#ffae00"},
  {name:"Ice",type:"gradient",gradient:"Ice",glow:true,glowColor:"#00bfff"},
  {name:"Split Red/White",type:"split",color:"#ff0000",splitColor:"#ffffff"},
  {name:"Split Blue/Yellow",type:"split",color:"#00ccff",splitColor:"#ffff00"},
  {name:"Rainbow Letters",type:"animated",lettersGradient:["#ff0000","#ff7700","#ffff00","#00ff00","#00ffff","#0000ff","#ff00ff"]},
  {name:"Purple Glow",type:"color",color:"#aa00ff",glow:true,glowColor:"#ff77ff"},
  {name:"Cyan Glow",type:"color",color:"#00ffff",glow:true,glowColor:"#00aaee"},
  {name:"Pink Neon",type:"color",color:"#ff00ff",glow:true,glowColor:"#ff00aa"},
  {name:"Sun Glow",type:"gradient",gradient:"Sunset",glow:true,glowColor:"#ffb347"}
];

const paintsContainer = document.getElementById("paints-container");
const preview = document.getElementById("preview");
const nickInput = document.getElementById("nick-input");
let selectedPaint = paints[0];

function updatePreview(){
  const nick = nickInput.value || "Podgląd";
  if(selectedPaint.type==="color"){
    preview.textContent = nick;
    preview.style.color = selectedPaint.color;
    preview.style.background="";
    preview.style.webkitTextFillColor="";
    preview.style.textShadow = selectedPaint.glow ? `0 0 6px ${selectedPaint.glowColor},0 0 12px ${selectedPaint.glowColor}` : "";
  } else if(selectedPaint.type==="gradient"){
    preview.textContent = nick;
    preview.style.backgroundImage = GRADIENTS[selectedPaint.gradient] || "";
    preview.style.webkitBackgroundClip="text";
    preview.style.webkitTextFillColor="transparent";
    preview.style.color="";
    preview.style.textShadow = selectedPaint.glow ? `0 0 6px ${selectedPaint.glowColor},0 0 12px ${selectedPaint.glowColor}` : "";
  } else if(selectedPaint.type==="split"){
    const mid = Math.floor(nick.length/2);
    preview.innerHTML = `<span style="color:${selectedPaint.color}">${nick.slice(0,mid)}</span><span style="color:${selectedPaint.splitColor}">${nick.slice(mid)}</span>`;
    preview.style.background="";
    preview.style.webkitTextFillColor="";
    preview.style.textShadow="";
  } else if(selectedPaint.type==="animated"){
    preview.innerHTML="";
    for(let i=0;i<nick.length;i++){
      const span = document.createElement("span");
      span.textContent = nick[i];
      span.style.color = selectedPaint.lettersGradient[i%selectedPaint.lettersGradient.length];
      preview.appendChild(span);
    }
    preview.style.background="";
    preview.style.webkitTextFillColor="";
    preview.style.textShadow="";
  }
}

paints.forEach(p=>{
  const btn = document.createElement("div");
  btn.className="paint-btn";
  btn.textContent=p.name;
  if(p.type==="color") btn.style.background = p.color;
  else if(p.type==="gradient") btn.style.background = GRADIENTS[p.gradient] || "#555";
  btn.onclick = ()=>{
    document.querySelectorAll(".paint-btn").forEach(b=>b.classList.remove("selected"));
    btn.classList.add("selected");
    selectedPaint = p;
    updatePreview();
  };
  paintsContainer.appendChild(btn);
});

nickInput.addEventListener("input",updatePreview);
updatePreview();

// Lista użytkowników
const userListEl = document.getElementById("user-list");
async function renderUsers(){
  try{
    const res = await fetch(FIREBASE_URL);
    const data = await res.json();
    userListEl.innerHTML="";
    if(!data) return;
    Object.keys(data).forEach(nick=>{
      const div = document.createElement("div");
      div.className="user-item";
      const span = document.createElement("span");
      span.textContent = nick;
      div.appendChild(span);
      const btn = document.createElement("button");
      btn.textContent="Usuń";
      btn.onclick = async()=>{
        await fetch(`${FIREBASE_URL}/${nick}.json`,{method:"DELETE"});
        renderUsers();
      };
      div.appendChild(btn);
      userListEl.appendChild(div);
    });
  }catch(e){console.error(e);}
}

// Apply & Reset
document.getElementById("apply-btn").onclick = async()=>{
  const nick = nickInput.value.trim();
  if(!nick) return alert("Wpisz nick");
  const paintData = {};
  if(selectedPaint.type==="split"){
    paintData.type="split"; paintData.color=selectedPaint.color; paintData.splitColor=selectedPaint.splitColor;
  } else if(selectedPaint.type==="gradient" || selectedPaint.type==="color"){
    paintData.type=selectedPaint.type;
    if(selectedPaint.color) paintData.color=selectedPaint.color;
    if(selectedPaint.gradient) paintData.gradient=selectedPaint.gradient;
    if(selectedPaint.glow) paintData.glow=true;
    if(selectedPaint.glowColor) paintData.glowColor=selectedPaint.glowColor;
  } else if(selectedPaint.type==="animated"){
    paintData.type="animated"; paintData.lettersGradient=selectedPaint.lettersGradient;
  }
  const payload = {}; payload[nick]={paint:paintData,badges:[]};
  await fetch(FIREBASE_URL,{method:"PATCH",body:JSON.stringify(payload)});
  renderUsers();
};

document.getElementById("reset-btn").onclick = async()=>{
  const nick = nickInput.value.trim();
  if(!nick) return alert("Wpisz nick");
  const payload = {}; payload[nick]={paint:{type:"color",color:"#00ff00"},badges:[]};
  await fetch(FIREBASE_URL,{method:"PATCH",body:JSON.stringify(payload)});
  updatePreview(); renderUsers();
};

renderUsers();
</script>
</body>
</html>
