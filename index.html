<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>gato.tv panel</title>

<style>
*{box-sizing:border-box}

body{
  margin:0;
  font-family:Inter,Segoe UI,sans-serif;
  background:linear-gradient(135deg,#0e0e13,#15151d);
  color:white;
}

/* ===== TOP BAR ===== */
header{
  height:64px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 24px;
  background:#0a0a10;
  box-shadow:0 4px 30px rgba(0,0,0,.7);
}

.logo{
  font-size:32px;
  font-weight:900;
  letter-spacing:2px;
  animation:logoGlow 3s infinite alternate;
}

@keyframes logoGlow{
  from{text-shadow:0 0 10px #ffcc00;color:#ffcc00}
  to{text-shadow:0 0 25px #ff9900;color:#ffe066}
}

nav{
  display:flex;
  gap:24px;
}

nav button{
  background:none;
  border:none;
  color:#aaa;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
}

nav button.active,
nav button:hover{
  color:#fff;
}

/* ===== CONTENT ===== */
.container{
  max-width:1000px;
  margin:40px auto;
  padding:24px;
}

.panel{
  display:none;
  background:#14141c;
  padding:24px;
  border-radius:16px;
  box-shadow:0 0 40px rgba(0,0,0,.6);
}

.panel.active{display:block}

h1{margin-top:0}

/* ===== EMOTES ===== */
.form{
  display:grid;
  grid-template-columns:1fr 2fr auto;
  gap:12px;
  margin-bottom:24px;
}

input{
  padding:12px;
  border-radius:10px;
  border:none;
  background:#0e0e16;
  color:white;
}

button.primary{
  padding:12px 20px;
  border-radius:10px;
  border:none;
  cursor:pointer;
  font-weight:800;
  background:linear-gradient(135deg,#ffcc00,#ff9900);
  color:black;
}

.emote-list{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:16px;
}

.emote{
  background:#0e0e16;
  border-radius:12px;
  padding:12px;
  text-align:center;
  position:relative;
}

.emote img{
  width:48px;
  height:48px;
}

.emote-name{
  margin-top:8px;
  font-weight:700;
}

.delete{
  position:absolute;
  top:6px;
  right:6px;
  background:#ff4444;
  color:white;
  border:none;
  border-radius:6px;
  padding:4px 8px;
  cursor:pointer;
}
</style>
</head>

<body>

<header>
  <div class="logo">gato.tv</div>
  <nav>
    <button class="active" data-tab="paints">Paints</button>
    <button data-tab="emotes">Emotes</button>
    <button data-tab="info">Info</button>
  </nav>
</header>

<div class="container">

  <!-- PAINTS -->
  <div class="panel active" id="paints">
    <h1>Paints</h1>
    <p>Panel paintów jest już podpięty w wtyczce.<br>
    Tutaj wkrótce rozbudowa UI.</p>
  </div>

  <!-- EMOTES -->
  <div class="panel" id="emotes">
    <h1>Global Emotes</h1>

    <div class="form">
      <input id="emoteName" placeholder="Nazwa emote (np. xdd)">
      <input id="emoteUrl" placeholder="Link do obrazka (PNG / GIF / WebP)">
      <button class="primary" id="addEmote">Dodaj</button>
    </div>

    <div class="emote-list" id="emoteList"></div>
  </div>

  <!-- INFO -->
  <div class="panel" id="info">
    <h1>Info</h1>
    <p><b>Wersja:</b> v0.1</p>
    <p>Opis wkrótce.</p>
  </div>

</div>

<script>
/* ===== TABS ===== */
document.querySelectorAll("nav button").forEach(btn=>{
  btn.onclick=()=>{
    document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));
    document.querySelectorAll(".panel").forEach(p=>p.classList.remove("active"));
    btn.classList.add("active");
    document.getElementById(btn.dataset.tab).classList.add("active");
  }
});

/* ===== EMOTES ===== */
const API =
"https://test-be375-default-rtdb.europe-west1.firebasedatabase.app/emotes.json";

const list = document.getElementById("emoteList");

async function loadEmotes(){
  list.innerHTML="";
  const res = await fetch(API);
  const data = await res.json() || {};

  for(const name in data){
    const e=document.createElement("div");
    e.className="emote";
    e.innerHTML=`
      <button class="delete">X</button>
      <img src="${data[name].url}">
      <div class="emote-name">${name}</div>
    `;

    e.querySelector(".delete").onclick=async()=>{
      await fetch(
        "https://test-be375-default-rtdb.europe-west1.firebasedatabase.app/emotes/"+name+".json",
        {method:"DELETE"}
      );
      loadEmotes();
    };

    list.appendChild(e);
  }
}

document.getElementById("addEmote").onclick=async()=>{
  const name=emoteName.value.trim().toLowerCase();
  const url=emoteUrl.value.trim();
  if(!name||!url) return alert("Uzupełnij pola");

  const payload={};
  payload[name]={url};

  await fetch(API,{
    method:"PATCH",
    body:JSON.stringify(payload)
  });

  emoteName.value="";
  emoteUrl.value="";
  loadEmotes();
};

loadEmotes();
</script>

</body>
</html>
