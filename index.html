<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Premium Nick Painter</title>
<style>
body{font-family:'Segoe UI',sans-serif;background:#121212;color:white;margin:0;padding:0;}
.container{max-width:900px;margin:50px auto;padding:25px;border-radius:20px;background:linear-gradient(145deg,#1f1f1f,#2a2a2a);box-shadow:0 8px 32px rgba(0,0,0,0.7);}
h1{text-align:center;color:#ff77ff;margin-bottom:20px;}
input[type=text]{width:100%;padding:10px;border-radius:8px;border:none;background:#222;color:white;font-size:16px;}
#preview{margin:20px 0;padding:12px;border-radius:12px;text-align:center;font-size:24px;background:#111;min-height:60px;display:flex;justify-content:center;align-items:center;}
#paints-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:10px;margin-top:10px;}
.paint-btn{padding:10px;border:none;border-radius:8px;font-weight:bold;cursor:pointer;color:white;transition:0.2s;}
.paint-btn.selected{border:2px solid white;transform:translateY(-2px);}
.paint-btn:hover{opacity:0.8;}
button{margin-top:10px;padding:10px 20px;border-radius:8px;border:none;font-weight:bold;cursor:pointer;transition:0.2s;}
#apply-btn{background:linear-gradient(135deg,#9147ff,#7722cc);color:white;}
#reset-btn{background:#555;color:white;margin-left:10px;}
#user-list{margin-top:20px;}
.user-item{display:flex;justify-content:space-between;align-items:center;margin:5px 0;padding:5px 10px;background:#222;border-radius:6px;}
.user-item button{background:#ff4444;color:white;border:none;padding:4px 8px;border-radius:4px;cursor:pointer;}
.user-item button:hover{opacity:0.8;}
</style>
</head>
<body>
<div class="container">
<h1>Premium Nick Painter</h1>

<label>Nick użytkownika:</label>
<input type="text" id="nick-input" placeholder="Wpisz nick...">

<div id="preview">Podgląd nicku</div>

<h3>Wybierz paint:</h3>
<div id="paints-container"></div>

<button id="apply-btn">Nadaj paint</button>
<button id="reset-btn">Resetuj nick</button>

<h3>Użytkownicy:</h3>
<div id="user-list"></div>
</div>

<script>
const FIREBASE_URL = "https://test-be375-default-rtdb.europe-west1.firebasedatabase.app/premium.json";
const GRADIENTS = {
    "Tęczowy":"linear-gradient(90deg, red, orange, yellow, green, cyan, blue, violet)",
    "Lava":"linear-gradient(90deg,#ff0000,#ff7700,#aa0000)",
    "Neon":"linear-gradient(90deg,#ff00ff,#00ffff)",
    "Sunset":"linear-gradient(90deg,#ff4500,#ffb347)",
    "Ocean":"linear-gradient(90deg,#1e90ff,#00ced1)"
};
const paints = [
    {name:"Czerwony",type:"color",color:"#ff0000"},
    {name:"Zielony",type:"color",color:"#00ff00"},
    {name:"Niebieski",type:"color",color:"#00ccff"},
    {name:"Różowy",type:"color",color:"#ff77ff"},
    {name:"Żółty",type:"color",color:"#ffff00"},
    {name:"Tęczowy",type:"gradient",gradient:"Tęczowy"},
    {name:"Lava",type:"gradient",gradient:"Lava"},
    {name:"Neon",type:"gradient",gradient:"Neon"},
    {name:"Sunset",type:"gradient",gradient:"Sunset"},
    {name:"Ocean",type:"gradient",gradient:"Ocean"},
    {name:"Split Red/White",type:"split",color:"#ff0000",splitColor:"#ffffff"},
    {name:"Split Blue/Yellow",type:"split",color:"#00ccff",splitColor:"#ffff00"}
];
const paintsContainer = document.getElementById("paints-container");
const preview = document.getElementById("preview");
const nickInput = document.getElementById("nick-input");
let selectedPaint = paints[0];

// Podgląd
function updatePreview(){
    const nick = nickInput.value || "Podgląd";
    if(selectedPaint.type==="color"){
        preview.textContent = nick;
        preview.style.color = selectedPaint.color;
        preview.style.background="";
        preview.style.webkitTextFillColor="";
    } else if(selectedPaint.type==="gradient"){
        preview.textContent = nick;
        preview.style.backgroundImage = GRADIENTS[selectedPaint.gradient] || "";
        preview.style.webkitBackgroundClip="text";
        preview.style.webkitTextFillColor="transparent";
        preview.style.color="";
    } else if(selectedPaint.type==="split"){
        const mid = Math.floor(nick.length/2);
        preview.innerHTML = `<span style="color:${selectedPaint.color}">${nick.slice(0,mid)}</span><span style="color:${selectedPaint.splitColor}">${nick.slice(mid)}</span>`;
        preview.style.background="";
        preview.style.webkitTextFillColor="";
        preview.style.color="";
    }
}

// Painty
paints.forEach(p=>{
    const btn = document.createElement("button");
    btn.className="paint-btn";
    btn.textContent = p.name;
    btn.style.background = p.type==="color" ? p.color : (GRADIENTS[p.gradient] || "#555");
    btn.onclick = ()=>{
        document.querySelectorAll(".paint-btn").forEach(b=>b.classList.remove("selected"));
        btn.classList.add("selected");
        selectedPaint = p;
        updatePreview();
    };
    paintsContainer.appendChild(btn);
});

nickInput.addEventListener("input",updatePreview);
updatePreview();

// Lista użytkowników
const userListEl = document.getElementById("user-list");
async function renderUsers(){
    try{
        const res = await fetch(FIREBASE_URL);
        const data = await res.json();
        userListEl.innerHTML="";
        if(!data) return;
        Object.keys(data).forEach(nick=>{
            const div = document.createElement("div");
            div.className="user-item";
            const span = document.createElement("span");
            span.textContent = nick;
            div.appendChild(span);
            const btn = document.createElement("button");
            btn.textContent="Usuń";
            btn.onclick = async()=>{
                await fetch(`${FIREBASE_URL}/${nick}.json`,{method:"DELETE"});
                renderUsers();
            };
            div.appendChild(btn);
            userListEl.appendChild(div);
        });
    }catch(e){console.error(e);}
}

// Nadaj paint
document.getElementById("apply-btn").onclick = async()=>{
    const nick = nickInput.value.trim();
    if(!nick) return alert("Wpisz nick");
    const payload = {};
    const paintData = {};
    if(selectedPaint.type==="split"){
        paintData.type="split";
        paintData.color=selectedPaint.color;
        paintData.splitColor=selectedPaint.splitColor;
    } else if(selectedPaint.type==="gradient"){
        paintData.type="gradient";
        paintData.gradient=selectedPaint.gradient;
    } else {
        paintData.type="color";
        paintData.color=selectedPaint.color;
    }
    payload[nick] = {paint:paintData, badges:[]};
    await fetch(FIREBASE_URL,{method:"PATCH",body:JSON.stringify(payload)});
    renderUsers();
};

// Reset
document.getElementById("reset-btn").onclick = async()=>{
    const nick = nickInput.value.trim();
    if(!nick) return alert("Wpisz nick");
    const payload = {};
    payload[nick] = {paint:{type:"color",color:"#00ff00"}, badges:[]};
    await fetch(FIREBASE_URL,{method:"PATCH",body:JSON.stringify(payload)});
    updatePreview();
    renderUsers();
};

renderUsers();
</script>
</body>
</html>
